export class LocalStorageService {
    constructor(_key, _defaultValue) {
        this._key = _key;
        this._defaultValue = _defaultValue;
        this._value = this._defaultValue;
    }
    get value() {
        if (this._value)
            return this._value;
        try {
            const value = localStorage.getItem(this._key);
            if (value) {
                this._value = JSON.parse(value);
                return this._value;
            }
        }
        catch (error) {
            console.error(error);
        }
        return this._defaultValue;
    }
    setItem(newValue) {
        if (newValue === this.value)
            return;
        this._value = newValue;
        try {
            if (newValue === null) {
                localStorage.removeItem(this._key);
            }
            else {
                localStorage.setItem(this._key, JSON.stringify(newValue));
            }
        }
        catch (error) {
            console.error(error);
        }
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9jYWwtc3RvcmFnZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy93YWxsZXQvbG9jYWwtc3RvcmFnZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxNQUFNLE9BQU8sbUJBQW1CO0lBRzVCLFlBQW9CLElBQVksRUFBVSxhQUFnQjtRQUF0QyxTQUFJLEdBQUosSUFBSSxDQUFRO1FBQVUsa0JBQWEsR0FBYixhQUFhLENBQUc7UUFGbEQsV0FBTSxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUM7SUFFeUIsQ0FBQztJQUU5RCxJQUFJLEtBQUs7UUFDTCxJQUFJLElBQUksQ0FBQyxNQUFNO1lBQUUsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDO1FBRXBDLElBQUk7WUFDQSxNQUFNLEtBQUssR0FBRyxZQUFZLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUM5QyxJQUFJLEtBQUssRUFBRTtnQkFDUCxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFNLENBQUM7Z0JBQ3JDLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQzthQUN0QjtTQUNKO1FBQUMsT0FBTyxLQUFLLEVBQUU7WUFDWixPQUFPLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDO1NBQ3hCO1FBRUQsT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDO0lBQzlCLENBQUM7SUFFRCxPQUFPLENBQUMsUUFBVztRQUNmLElBQUksUUFBUSxLQUFLLElBQUksQ0FBQyxLQUFLO1lBQUUsT0FBTztRQUVwQyxJQUFJLENBQUMsTUFBTSxHQUFHLFFBQVEsQ0FBQztRQUV2QixJQUFJO1lBQ0EsSUFBSSxRQUFRLEtBQUssSUFBSSxFQUFFO2dCQUNuQixZQUFZLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQzthQUN0QztpQkFBTTtnQkFDSCxZQUFZLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO2FBQzdEO1NBQ0o7UUFBQyxPQUFPLEtBQUssRUFBRTtZQUNaLE9BQU8sQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUM7U0FDeEI7SUFDTCxDQUFDO0NBQ0oiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgTG9jYWxTdG9yYWdlU2VydmljZTxUPiB7XG4gICAgcHJpdmF0ZSBfdmFsdWUgPSB0aGlzLl9kZWZhdWx0VmFsdWU7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIF9rZXk6IHN0cmluZywgcHJpdmF0ZSBfZGVmYXVsdFZhbHVlOiBUKSB7fVxuXG4gICAgZ2V0IHZhbHVlKCk6IFQge1xuICAgICAgICBpZiAodGhpcy5fdmFsdWUpIHJldHVybiB0aGlzLl92YWx1ZTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSh0aGlzLl9rZXkpO1xuICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fdmFsdWUgPSBKU09OLnBhcnNlKHZhbHVlKSBhcyBUO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl92YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZmF1bHRWYWx1ZTtcbiAgICB9XG5cbiAgICBzZXRJdGVtKG5ld1ZhbHVlOiBUKTogdm9pZCB7XG4gICAgICAgIGlmIChuZXdWYWx1ZSA9PT0gdGhpcy52YWx1ZSkgcmV0dXJuO1xuXG4gICAgICAgIHRoaXMuX3ZhbHVlID0gbmV3VmFsdWU7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmIChuZXdWYWx1ZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKHRoaXMuX2tleSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHRoaXMuX2tleSwgSlNPTi5zdHJpbmdpZnkobmV3VmFsdWUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxufVxuIl19